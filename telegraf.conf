[agent]
  interval = "10s"
  round_interval = true
  debug = true  # เปิด debug เพื่อดู parsing logs

[[outputs.influxdb_v2]]
  urls = ["http://influxdb:8086"]
  token = "my-token-1234567890abcdef"
  organization = "myorg"
  bucket = "sensors"

[[inputs.mqtt_consumer]]
  servers = ["tcp://mosquitto:1883"]
  topics = ["cucumber/sensors/#"]  # Wildcard สำหรับทุก MAC topic
  data_format = "json"             # Parse payload เป็น JSON
  json_string_fields = ["time", "sensor_id"]  # Force string fields (MAC จะไม่เป็น zeros)
  name_override = "cucumber"       # Measurement ชื่อ "cucumber"
  tag_keys = ["sensor_id"]         # Map sensor_id เป็น tag (unique per sensor)